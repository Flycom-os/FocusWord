# API для работы с постами/страницами

## Обзор

Реализована полная интеграция с бэкенд API для работы с постами/страницами. Включает в себя создание, редактирование, удаление, публикацию и получение списка постов.

## Структура файлов

### Типы данных
- `src/shared/types/posts.ts` - TypeScript интерфейсы для работы с постами

### API методы
- `src/shared/api/posts.ts` - API клиент с методами для работы с постами

### Компоненты
- `src/pages/records/EditRecordPage.tsx` - Страница создания/редактирования постов
- `src/pages/records/index.tsx` - Страница списка постов

## API методы

### Создание поста
```typescript
// Создание и публикация поста
const post = await createPost({
  title: "Новая запись",
  announcement: "Анонс",
  text: "<p>Текст новой записи</p>",
  visibility: false,
  category_id: 1,
  file_id: 1,
  seo: {
    seo_title: "Новая запись",
    seo_label: "novaya_zapis",
    seo_keywords: ["новая запись"],
    seo_description: "новая запись"
  },
  seo_preset_id: 1,
  date_to_publish: "2023-08-17T01:23:08.069Z"
});

// Сохранение как черновик
const draft = await savePost(data);
```

### Получение постов
```typescript
// Получение списка постов с пагинацией
const posts = await getPostsPagination(1, 10);

// Получение конкретного поста
const post = await getPostById(1);
```

### Обновление поста
```typescript
// Обновление и публикация
const updatedPost = await updatePostPublish(1, data);

// Обновление черновика
const updatedDraft = await updatePostSave(1, data);
```

### Удаление постов
```typescript
// Удаление нескольких постов
const result = await deletePosts({ ids: [1, 2, 3] });
```

### Публикация постов
```typescript
// Публикация нескольких постов
const result = await publishPosts({ ids: [1, 2, 3] });
```

## Использование

### Создание нового поста
1. Перейдите на `/admin/records/new`
2. Заполните поля:
   - Заголовок (обязательно)
   - Анонс (опционально)
   - Содержимое (опционально)
   - Видимость (открыто/закрыто)
   - Категория
   - SEO данные
3. Нажмите "Сохранить" для черновика или "Опубликовать" для публикации

### Редактирование поста
1. Перейдите на `/admin/records/edit?id=1`
2. Внесите изменения
3. Нажмите "Сохранить" или "Опубликовать"

### Управление постами
1. Перейдите на `/admin/records`
2. Используйте поиск для фильтрации
3. Выберите посты для массовых операций
4. Используйте кнопки действий для удаления/публикации

## Особенности

### Валидация
- Все поля проходят валидацию на клиенте и сервере
- Заголовок обязателен и не должен превышать 64 символа
- SEO поля обязательны для заполнения

### Обработка ошибок
- Все API вызовы обрабатывают ошибки
- Пользователю показываются понятные сообщения об ошибках
- Состояние загрузки отображается во время операций

### SEO поддержка
- Полная поддержка SEO полей
- Автоматическое заполнение на основе пресетов
- Ручное редактирование SEO параметров

### Статусы постов
- `DRAFT` - Черновик
- `PUBLISHED` - Опубликовано
- `WAIT_FOR_PUBLISH` - Ожидает публикации

## Интеграция с бэкендом

API полностью совместим с бэкенд эндпоинтами:
- `POST /api/posts/publish` - Создание и публикация
- `POST /api/posts/save` - Сохранение черновика
- `GET /api/posts/posts-pagination/:page/:limit` - Получение списка
- `GET /api/posts/posts/:id` - Получение поста
- `PATCH /api/posts/update-publish/:id` - Обновление и публикация
- `PATCH /api/posts/update-save/:id` - Обновление черновика
- `DELETE /api/posts/multiple-delete` - Удаление постов
- `PATCH /api/posts/multiple-publish` - Публикация постов
